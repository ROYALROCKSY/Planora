{% extends "base.html" %} {% block title %}Dashboard | Planora{% endblock %} {%
block content %}
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='css/dashboard.css') }}"
/>

<main class="dashboard-page">
  <div class="dashboard-shell" role="region" aria-label="Dashboard">
    <div class="dashboard-grid">
      <!-- Main area -->
      <section class="main-area" aria-label="Main dashboard">
        <!-- Welcome -->
        <header class="welcome-block" aria-label="Welcome">
          <h2 class="welcome-title">Welcome back, Samarpita!</h2>
          <p class="welcome-subtitle">
            “Every day is a new opportunity to learn something amazing!”
          </p>
        </header>

        <!-- Quick alerts / cards -->
        <section class="quick-cards" aria-label="Quick alerts">
          <article class="card card--lavender">
            <h3 class="card-title">
              <span class="card-title__icon" aria-hidden="true"></span>
              Peak Focus Time
            </h3>
            <div class="card-main" id="peak-focus-time">Loading...</div>
            <p class="card-sub">Based on your highest productivity scores.</p>
          </article>

          <article class="card card--blush">
            <h3 class="card-title">
              <span class="card-title__icon" aria-hidden="true"></span>
              Priority Focus
            </h3>
            <div class="card-main card-main--accent" id="priority-subject">
              Loading...
            </div>
            <p class="card-sub" id="priority-reason">
              Fetching recommendation...
            </p>
          </article>

          <article class="card card--mint">
            <h3 class="card-title">
              <span class="card-title__icon" aria-hidden="true"></span>
              Daily Streak
            </h3>
            <div class="card-main">
              <span id="daily-streak-count">0 days</span> 
            </div>
            <p class="card-sub">
              Missed: <span id="daily-streak-missed">0</span> day(s) this month
              <br />
              <span id="daily-streak-msg">Loading...</span>
            </p>
          </article>
        </section>

        <!-- Study tools -->
        <section class="study-tools" aria-label="Study tools">
          <!-- Flashcards panel -->
          <div class="flashcard-panel">
            <div class="panel-header">
              <h2 class="panel-title">Flashcards</h2>
            </div>

            <div class="doc-upload">
              <label for="doc-upload" class="upload-label">Upload:</label>
              <input id="doc-upload" class="upload-input" type="file" />
              <button class="upload-btn" type="button" aria-label="Upload">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="18"
                  height="18"
                  fill="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path d="M5 20h14v-2H5v2zm7-16l-6 6h4v6h4v-6h4l-6-6z" />
                </svg>
              </button>
            </div>

            <!-- Flashcard Stage -->
            <div class="flashcard-stage">
              <div class="flashcard-card" id="flashcard-card">
                <p id="flashcard-content"></p>
                <div
                  id="flash-left"
                  class="flash-nav flash-left"
                  aria-label="Previous card"
                ></div>
                <div
                  id="flash-right"
                  class="flash-nav flash-right"
                  aria-label="Next card"
                ></div>
              </div>
            </div>
          </div>

          <!-- Task plan panel -->
          <div class="task-plan-panel">
            <div class="panel-header">
              <h2 class="panel-title">Today's Plan</h2>
            </div>

            <div class="task-timeline" role="list">
              <div class="task-row" role="listitem">
                <div class="task-dot" aria-hidden="true"></div>
                <div class="task-meta">
                  <strong class="task-name">Task 1: Finish Chapter 3</strong>
                  <span class="task-deadline">Due: Oct 5, 2025</span>
                </div>
              </div>
              <div class="task-row" role="listitem">
                <div class="task-dot" aria-hidden="true"></div>
                <div class="task-meta">
                  <strong class="task-name">Task 2: Revise Flashcards</strong>
                  <span class="task-deadline">Due: Oct 7, 2025</span>
                </div>
              </div>
              <div class="task-row" role="listitem">
                <div class="task-dot" aria-hidden="true"></div>
                <div class="task-meta">
                  <strong class="task-name">Task 3: Practice Problems</strong>
                  <span class="task-deadline">Due: Oct 9, 2025</span>
                </div>
              </div>
            </div>
          </div>
        </section>
      </section>

      <!-- Chatbot sidebar -->
      <aside class="chatbot-sidebar" aria-label="Study Assistant">
        <header class="chatbot-header">
          <h2 class="chatbot-title">Study Assistant</h2>
        </header>
        <div class="chatbot-body" id="chatbot-body">
          <div id="chat-messages"></div>
        </div>
        <footer class="chatbot-inputbar" aria-label="Chat input">
          <input
            class="chat-input"
            type="text"
            placeholder="Ask me something…"
            aria-label="Ask me something"
          />
          <button class="chat-send" type="button">Send</button>
        </footer>
      </aside>
    </div>
  </div>
</main>

<!-- Scripts at end -->
<script src="{{ url_for('static', filename='js/chat.js') }}"></script>
<script src="{{ url_for('static', filename='js/flashcards.js') }}"></script>
<script src="{{ url_for('static', filename='js/best_time.js') }}"></script>
<script src="{{ url_for('static', filename='js/priority_focus.js') }}"></script>
<script src="{{ url_for('static', filename='js/daily_streak.js') }}"></script>

{% endblock %}
